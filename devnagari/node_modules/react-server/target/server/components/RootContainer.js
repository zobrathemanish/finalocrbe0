'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var PropTypes = require('prop-types');
var React = require('react');

var _require = require('./RootElement'),
    ensureRootElementWithContainer = _require.ensureRootElementWithContainer,
    getRootElementAttributes = _require.getRootElementAttributes;

var RootContainer = function (_React$Component) {
	_inherits(RootContainer, _React$Component);

	function RootContainer() {
		_classCallCheck(this, RootContainer);

		return _possibleConstructorReturn(this, (RootContainer.__proto__ || Object.getPrototypeOf(RootContainer)).apply(this, arguments));
	}

	_createClass(RootContainer, [{
		key: 'render',
		value: function render() {
			throw new Error("RootContainers can't go in non-RootContainers!");
		}
	}]);

	return RootContainer;
}(React.Component);

module.exports = RootContainer;

RootContainer.propTypes = {
	listen: PropTypes.func,
	when: PropTypes.object, // A promise.
	_isRootContainer: PropTypes.bool
};

RootContainer.defaultProps = {
	_isRootContainer: true
};

RootContainer.flattenForRender = function (element) {
	return [{ containerOpen: getRootElementAttributes(element) }].concat(prepChildren(element)).concat([{ containerClose: true }]).reduce(function (m, v) {
		return m.concat(Array.isArray(v) ? v : [v]);
	}, []);
};

RootContainer.isRootContainer = function (element) {
	return element && element.props && element.props._isRootContainer;
};

function prepChildren(element) {
	return React.Children.toArray(element.props.children).map(function (child) {
		return RootContainer.isRootContainer(child) ? RootContainer.flattenForRender(child) : ensureRootElementWithContainer(child, element);
	});
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvUm9vdENvbnRhaW5lci5qcyJdLCJuYW1lcyI6WyJQcm9wVHlwZXMiLCJyZXF1aXJlIiwiUmVhY3QiLCJlbnN1cmVSb290RWxlbWVudFdpdGhDb250YWluZXIiLCJnZXRSb290RWxlbWVudEF0dHJpYnV0ZXMiLCJSb290Q29udGFpbmVyIiwiRXJyb3IiLCJDb21wb25lbnQiLCJtb2R1bGUiLCJleHBvcnRzIiwicHJvcFR5cGVzIiwibGlzdGVuIiwiZnVuYyIsIndoZW4iLCJvYmplY3QiLCJfaXNSb290Q29udGFpbmVyIiwiYm9vbCIsImRlZmF1bHRQcm9wcyIsImZsYXR0ZW5Gb3JSZW5kZXIiLCJlbGVtZW50IiwiY29udGFpbmVyT3BlbiIsImNvbmNhdCIsInByZXBDaGlsZHJlbiIsImNvbnRhaW5lckNsb3NlIiwicmVkdWNlIiwibSIsInYiLCJBcnJheSIsImlzQXJyYXkiLCJpc1Jvb3RDb250YWluZXIiLCJwcm9wcyIsIkNoaWxkcmVuIiwidG9BcnJheSIsImNoaWxkcmVuIiwibWFwIiwiY2hpbGQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxJQUFJQSxZQUFZQyxRQUFRLFlBQVIsQ0FBaEI7QUFDQSxJQUFJQyxRQUFRRCxRQUFRLE9BQVIsQ0FBWjs7ZUFJSUEsUUFBUSxlQUFSLEM7SUFGSEUsOEIsWUFBQUEsOEI7SUFDQUMsd0IsWUFBQUEsd0I7O0lBR0tDLGE7Ozs7Ozs7Ozs7OzJCQUNJO0FBQ1IsU0FBTSxJQUFJQyxLQUFKLENBQVUsZ0RBQVYsQ0FBTjtBQUNBOzs7O0VBSDBCSixNQUFNSyxTOztBQU1sQ0MsT0FBT0MsT0FBUCxHQUFpQkosYUFBakI7O0FBRUFBLGNBQWNLLFNBQWQsR0FBMEI7QUFDekJDLFNBQVFYLFVBQVVZLElBRE87QUFFekJDLE9BQU1iLFVBQVVjLE1BRlMsRUFFRDtBQUN4QkMsbUJBQWtCZixVQUFVZ0I7QUFISCxDQUExQjs7QUFNQVgsY0FBY1ksWUFBZCxHQUE2QjtBQUM1QkYsbUJBQWtCO0FBRFUsQ0FBN0I7O0FBSUFWLGNBQWNhLGdCQUFkLEdBQWlDLFVBQVNDLE9BQVQsRUFBa0I7QUFDbEQsUUFBTyxDQUFDLEVBQUNDLGVBQWVoQix5QkFBeUJlLE9BQXpCLENBQWhCLEVBQUQsRUFDTEUsTUFESyxDQUNFQyxhQUFhSCxPQUFiLENBREYsRUFFTEUsTUFGSyxDQUVFLENBQUMsRUFBQ0UsZ0JBQWdCLElBQWpCLEVBQUQsQ0FGRixFQUdMQyxNQUhLLENBR0UsVUFBQ0MsQ0FBRCxFQUFHQyxDQUFIO0FBQUEsU0FBU0QsRUFBRUosTUFBRixDQUFTTSxNQUFNQyxPQUFOLENBQWNGLENBQWQsSUFBaUJBLENBQWpCLEdBQW1CLENBQUNBLENBQUQsQ0FBNUIsQ0FBVDtBQUFBLEVBSEYsRUFHNkMsRUFIN0MsQ0FBUDtBQUlBLENBTEQ7O0FBT0FyQixjQUFjd0IsZUFBZCxHQUFnQyxVQUFTVixPQUFULEVBQWtCO0FBQ2pELFFBQU9BLFdBQVdBLFFBQVFXLEtBQW5CLElBQTRCWCxRQUFRVyxLQUFSLENBQWNmLGdCQUFqRDtBQUNBLENBRkQ7O0FBSUEsU0FBU08sWUFBVCxDQUF1QkgsT0FBdkIsRUFBZ0M7QUFDL0IsUUFBT2pCLE1BQU02QixRQUFOLENBQWVDLE9BQWYsQ0FBdUJiLFFBQVFXLEtBQVIsQ0FBY0csUUFBckMsRUFBK0NDLEdBQS9DLENBQ047QUFBQSxTQUFTN0IsY0FBY3dCLGVBQWQsQ0FBOEJNLEtBQTlCLElBQ1A5QixjQUFjYSxnQkFBZCxDQUErQmlCLEtBQS9CLENBRE8sR0FFUGhDLCtCQUErQmdDLEtBQS9CLEVBQXNDaEIsT0FBdEMsQ0FGRjtBQUFBLEVBRE0sQ0FBUDtBQUtBIiwiZmlsZSI6ImNvbXBvbmVudHMvUm9vdENvbnRhaW5lci5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xudmFyIHtcblx0ZW5zdXJlUm9vdEVsZW1lbnRXaXRoQ29udGFpbmVyLFxuXHRnZXRSb290RWxlbWVudEF0dHJpYnV0ZXMsXG59ID0gcmVxdWlyZSgnLi9Sb290RWxlbWVudCcpO1xuXG5jbGFzcyBSb290Q29udGFpbmVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcblx0cmVuZGVyKCkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIlJvb3RDb250YWluZXJzIGNhbid0IGdvIGluIG5vbi1Sb290Q29udGFpbmVycyFcIik7XG5cdH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSb290Q29udGFpbmVyO1xuXG5Sb290Q29udGFpbmVyLnByb3BUeXBlcyA9IHtcblx0bGlzdGVuOiBQcm9wVHlwZXMuZnVuYyxcblx0d2hlbjogUHJvcFR5cGVzLm9iamVjdCwgLy8gQSBwcm9taXNlLlxuXHRfaXNSb290Q29udGFpbmVyOiBQcm9wVHlwZXMuYm9vbCxcbn1cblxuUm9vdENvbnRhaW5lci5kZWZhdWx0UHJvcHMgPSB7XG5cdF9pc1Jvb3RDb250YWluZXI6IHRydWUsXG59XG5cblJvb3RDb250YWluZXIuZmxhdHRlbkZvclJlbmRlciA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcblx0cmV0dXJuIFt7Y29udGFpbmVyT3BlbjogZ2V0Um9vdEVsZW1lbnRBdHRyaWJ1dGVzKGVsZW1lbnQpfV1cblx0XHQuY29uY2F0KHByZXBDaGlsZHJlbihlbGVtZW50KSlcblx0XHQuY29uY2F0KFt7Y29udGFpbmVyQ2xvc2U6IHRydWV9XSlcblx0XHQucmVkdWNlKChtLHYpID0+IG0uY29uY2F0KEFycmF5LmlzQXJyYXkodik/djpbdl0pLCBbXSlcbn1cblxuUm9vdENvbnRhaW5lci5pc1Jvb3RDb250YWluZXIgPSBmdW5jdGlvbihlbGVtZW50KSB7XG5cdHJldHVybiBlbGVtZW50ICYmIGVsZW1lbnQucHJvcHMgJiYgZWxlbWVudC5wcm9wcy5faXNSb290Q29udGFpbmVyO1xufVxuXG5mdW5jdGlvbiBwcmVwQ2hpbGRyZW4gKGVsZW1lbnQpIHtcblx0cmV0dXJuIFJlYWN0LkNoaWxkcmVuLnRvQXJyYXkoZWxlbWVudC5wcm9wcy5jaGlsZHJlbikubWFwKFxuXHRcdGNoaWxkID0+IFJvb3RDb250YWluZXIuaXNSb290Q29udGFpbmVyKGNoaWxkKVxuXHRcdFx0P1Jvb3RDb250YWluZXIuZmxhdHRlbkZvclJlbmRlcihjaGlsZClcblx0XHRcdDplbnN1cmVSb290RWxlbWVudFdpdGhDb250YWluZXIoY2hpbGQsIGVsZW1lbnQpXG5cdClcbn1cbiJdfQ==
